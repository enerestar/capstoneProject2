<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="utf-8" />
    <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

</head>
<body>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark" ">

        <!-- LINKS -->
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="#">Home</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#students">Students</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#courses">Courses</a>
            </li>
        </ul>

    </nav>

    <!--CAROUSEL-->
    <div id="slideshow" class="carousel slide" data-ride="carousel">

        <!-- Indicators -->
        <ul class="carousel-indicators">
            <li data-target="#slideshow" data-slide-to="0" class="active"></li>
            <li data-target="#slideshow" data-slide-to="1"></li>
            <li data-target="#slideshow" data-slide-to="2"></li>
        </ul>

        <!-- SLIDESHOW -->
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="/img/uni1.jpg" style="width: 100%; height: 780px">
                <div class="carousel-caption">
                    <h3>OUR CAMPUS</h3>
                    <p>The atmosphere in Consoto University is lorem ipsum!</p>
                </div>
            </div>
            <div class="carousel-item">
                <img src="/img/uni2.jpg" style="width: 100%; height: 780px">
                <div class="carousel-caption">
                    <h3 class="text-dark">OUR STUDENTS</h3>
                    <p class="text-dark">The students makes the campus vibrant and fun</p>
                </div>
            </div>
            <div class="carousel-item">
                <img src="/img/bg.png" style="width: 100%; height: 780px">
                <div class="carousel-caption">
                    <h3>GRADUATION</h3>
                    <p>Thank you Consoto - A night we won't forget!</p>
                </div>
            </div>
        </div>
    </div>


    <!--STUDENTS SECTION-->
    <div class=".container-fluid jumbotron text-center" id="students">
        <h1 class="text-dark">Contoso University</h1>
        <p class="text-dark">
            The University of Consoto is an urban research university that has driven new ways of thinking since 2020s. Our commitment to free and open inquiry draws inspired scholars to our global campuses, where ideas are born that challenge and change the world.
            We empower individuals to challenge conventional thinking in pursuit of original ideas. Students in the College develop critical, analytic, and writing skills in our rigorous, interdisciplinary core curriculum. Through graduate programs, students test their ideas with Uscholars, and become the next generation of leaders in academia, industry, nonprofits, and government.
        </p>
    </div>

    <!--COURSES AND DATA SECTION-->
    <div class="container text-center" id="courses" style="height: 800px">
        <div class="row">
            <div class="col-sm-4">
                <h3>STUDENTS</h3>
                <p>Click to see our students</p>
                <img src="/img/submarine.jpg" class="text-muted" data-toggle="modal" data-target="#modal"
                     alt="Click to see our students" style="width:60%"
                     onclick="document.getElementById('modal').style.display='block'">
            </div>
            <div class="col-sm-4">
                <h3>COURSES</h3>
                <p>Click to see our courses</p>
                <img src="/img/submarine.jpg" class="text-muted" data-toggle="modal" data-target="#modal"
                     alt="Click to see our students" style="width:60%"
                     onclick="document.getElementById('modal').style.display='block'">
            </div>
            <div class="col-sm-4">
                <h3>CURRICULUM</h3>
                <p>Click to see our curriculum</p>
                <img src="/img/submarine.jpg" class="text-muted" data-toggle="modal" data-target="#modal"
                     alt="Click to see our students" style="width:60%"
                     onclick="document.getElementById('modal').style.display='block'">
            </div>
        </div>
    </div>



    <!--MODAL-->
    <div class="modal" id="modal">
        <div class="modal-dialog">
            <div class="modal-content" style="padding:30px">
                <button type="button" class="close" data-dismiss="modal">&times;</button>

                <!-- Modal body -->
                <div class="form-group">
                    <label for="usr">ID:</label>
                    <input  type="number" class="form-control" id="txtid"readonly>
                </div>
                <div class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" class="form-control" id="txtname">
                </div>

                <div class="form-group">
                    <label for="name">Class:</label>
                    <input type="text" class="form-control" id="txtclass">
                </div>
                <div class="row" style="padding:30px">
                    <input class="btn btn-primary col" type="button" onclick="SaveData()" value="save" />
                    <input class="btn btn-success col" type="button" onclick="GetStudents()" value="retrieve" />
                </div>
                <div class="form-group">
                    <label for="name">Course:</label>
                    <input type="text" class="form-control" id="txtcourse">
                </div>
                <div class="row" style="padding:30px">
                    <input class="btn btn-primary col" type="button" onclick="SaveCourse()" value="save" />
                    <input class="btn btn-success col" type="button" onclick="GetCourse()" value="retrieve" />
                </div>
                <br />
                <br />
                <!-- Modal footer -->
                <!--<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>-->
                <table class="table table-striped" id="td1">
                    <thead>
                        <tr>
                            <th>Firstname</th>
                            <th>Lastname</th>
                            <th>Email</th>
                        </tr>
                    </thead>
                </table>
            </div>
        </div>
    </div>

    <script src="../node_modules/jquery/dist/jquery.js"></script>
    <script>function SaveData() {

            var student = {};
            student.id = $("#txtid").val()
            student.name = $("#txtname").val()
            student.class = $("#txtclass").val()
            if (student.name == undefined || student.class == undefined
                || student.name == "" || student.class == "") {
                alert("error");
            }
            alert(student.name);
            alert(student.class);

            if ($("#txtid").val() == undefined || $("#txtid").val() == "") {
                $.post("http://localhost:3000/students", student)
                    .done(res => Success(res))
                    .fail(res => Error(res));
            } else {
                console.log(student.name);
                console.log(student.id);
                $.ajax({
                    type: 'PUT',
                    url: 'http://localhost:3000/students/' + student.id,
                    data: student
                })
                    .done(res => Success(res))
                    .fail(res => Error(res));
            }
        }

        function GetStudents() {
            $.get("http://localhost:3000/students")
                .done(res => SuccessGet(res))
                .fail(res => Error(res));
        }

        function SaveCourse() {
            var course = {};
            course.name = $("#txtcourse").val()
            if (course.name == undefined || course.name == "") {
                alert(course.name);
                $.post("http://localhost:3000/courses", course)
                    .done(res => Success(res))
                    .fail(res => Error(res));
            }
        }

        function DeleteStudent(id) {
            var tdid = $('#td1').find('tr:eq(' + id + ')').find('td:eq(0)');
            var sid = tdid.html();
            $("#txtid").val(sid);
            $.ajax({
                type: 'DELETE',
                url: 'http://localhost:3000/students/' + id
            })
                .done(res => SuccessDel(res))
                .fail(res => Error(res));
        }

        function SuccessDel() {
            $("#txtid").val("");
            $("#txtname").val("");
            $("#txtclass").val("");
            alert("Deleted successfully");
            // get all records

            GetStudents();
        }

        function EditStudent(id) {
            var tdid = $('#td1').find('tr:eq(' + id + ')').find('td:eq(0)');
            var sid = tdid.html();
            var tdname = $('#td1').find('tr:eq(' + id + ')').find('td:eq(1)');
            var sname = tdname.html();
            var tdclass = $('#td1').find('tr:eq(' + id + ')').find('td:eq(2)');
            var sclass = tdclass.html();

            $("#txtid").val(sid);
            $("#txtname").val(sname);
            $("#txtclass").val(sclass);


        }
        $(document).ready(function () {
        });

        function SuccessGet(res) {
            for (temp of res) {
                $('#td1')
                    .append('<tr id="' + temp.id + '"><td>' + temp.id + '</td><td>'
                        + temp.name + '</td><td>'
                        + temp.class + '</td><td>'
                        + '<a href="#" onclick="EditStudent(' + temp.id + ')">edit<a/></td><td>'
                        + '<a href="#" onclick="DeleteStudent(' + temp.id + ')"> delete <a/></td ></tr > ');
            }
        }
        function Success(res) {
            // clea text boxes

            $("#txtid").val("");
            $("#txtname").val("");
            $("#txtclass").val("");
            alert("Added successfully");
            // get all records

            GetStudents();
        }
        function Error(res) {
            alert("error");
            console.log(res);
        }</script>
</body>
</html>
